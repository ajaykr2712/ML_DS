# Leveraging Model Driven Telemetry on Cisco IOS XE

## Introduction: The Evolution of Network Monitoring

Network management is undergoing a significant transformation. Historically, network administrators relied heavily on the Command-Line Interface (CLI) for configuration and operational status checks, alongside Simple Network Management Protocol (SNMP) for polling device information [1, 2]. While foundational, these methods have proven over time to be incomplete, inefficient, and difficult to scale and maintain in the face of growing network complexity and the demand for real-time data [2].

The need for greater speed, scale, fault isolation, forensic analysis, and near-real-time data availability has driven the industry towards more modern, programmable approaches [2]. **Telemetry**, defined as the automated communications process for collecting measurements and other data from remote locations and transmitting it for monitoring, is central to this evolution [3]. In the context of Cisco IOS XE, this means devices transmitting operational, configuration, and event information to remote data collectors [3].

## Cisco IOS XE: The Foundation for Modern Telemetry

This shift is fundamentally enabled by the evolution of the network operating system itself. Cisco IOS, originally a monolithic operating system dating back to 1986, has evolved into **Cisco IOS XE** [4, 5]. Cisco IOS XE was designed with a modular and modern software architecture, restructuring the legacy monolithic code [5]. Key changes include dividing the OS into components for modularity, incorporating a low-level Linux kernel for enhanced resource management, and running classic Cisco IOS functionality as a modular process (Cisco IOSd) on top of Linux [6].

This modern architecture allows for the introduction of other modular functions and applications [6]. Crucially, Cisco IOS XE supports standardized APIs based on data models, which are replacing traditional CLI and SNMP methods for configuration and monitoring [1]. **All API services on IOS XE, including model driven telemetry features, are available and operational on any network device with a base-level license, regardless of the license level** [1].

## Model Driven Telemetry (MDT): The Next Generation of Monitoring

Against the backdrop of the modern Cisco IOS XE architecture, **Model Driven Telemetry (MDT)** emerges as a powerful solution to the challenges of legacy monitoring [2, 7]. MDT provides a mechanism to stream data continuously from network devices using a **push model**, as opposed to the traditional pull model of SNMP [7, 8]. This push approach offers **near-real-time access to operational statistics** [7, 8].

MDT leverages standardized **YANG data models** over open protocols, allowing applications to subscribe to specific, structured data items they need [7, 8]. Data can be published at a defined interval (**periodic**) or only when a specific event or state change occurs (**on-change**) [9, 10]. This capability provides granular visibility into network traffic, device behavior, and services [9].

The **importance of telemetry** is underscored by the need for:
*   Continuous real-time visibility in growing networks for better manageability [11].
*   Handling and storing the huge amount of data generated by these networks for analysis [11].
*   Leveraging innovation and cloud-scale technologies for software-defined and automated visibility using data [11].

MDT delivers significant **benefits**:
*   **Improved network device visibility:** Granular, real-time monitoring and troubleshooting [9].
*   **Faster troubleshooting:** Quickly identifying root causes and taking corrective actions [12].
*   **Better network optimization:** Using detailed data to enhance performance and automate responses [12].
*   **Simplified network management:** Standardized data collection and reporting reduces complexity [12].
*   **Enhanced security:** Real-time visibility aids in detecting and preventing threats and serves as a forensic tool [13].

## Leveraging MDT: Key Components and Concepts

Effectively leveraging MDT involves understanding its core components:

*   **YANG Data Models:** These are fundamental, defining the structure, syntax, and semantics of data, moving away from unstructured CLI output [14]. YANG was developed by the IETF to enable reuse across vendors and is used for automating configuration and monitoring [15]. Cisco IOS XE supports both **native** (Cisco-specific, offering broader feature coverage and familiarity to Cisco users) and **open** (standardized across vendors from bodies like IETF and OpenConfig) models [15-19]. **YANG models are used for both configuration and operational data** [20, 21]. **Xpath** is used to define specific data elements within a YANG model [21, 22]. Tools like **YANG Suite** and the **YANG Catalog** are crucial for exploring and understanding these models [23-25].

*   **MDT Interfaces:** MDT data is accessed via various interfaces (similar to APIs) providing different transport and encoding options [26].
    *   **NETCONF:** RPC-based protocol using XML encoding, session-oriented, uses SSH transport. Used for configuration and retrieval, and dial-in telemetry [27, 28].
    *   **gNMI:** gRPC Network Management Interface, primarily for dial-in, uses YANG-modeled data encoded using JSON_IETF or PROTO over HTTP2 [28-31].
    *   **gRPC:** Google Remote Procedure Call, supports dial-out telemetry, uses KV GPB encoding over HTTP2 [28, 30-32].
    *   **RESTCONF:** Follows REST API principles (GET, PATCH, DELETE) for configuration and operational data retrieval (via GET), but has no dedicated telemetry streaming option [33].

*   **Dial-in vs. Dial-out:** This refers to the direction of the telemetry session initiation [34, 35].
    *   **Dial-in (Dynamic):** The tooling collector (client) establishes the session to the network device (server) and defines the subscription. The subscription is tied to the session's life and is not part of the device's running configuration [34-36]. NETCONF and gNMI support dial-in [37]. Dial-in subscriptions are lost during HA failover [37, 38].
    *   **Dial-out (Configured):** The subscription is statically configured on the network device (client) using CLI, NETCONF, or RESTCONF, and the device initiates the session to the collector (server) [34, 35, 39]. gRPC supports dial-out [39]. Dial-out subscriptions are persistent and automatically reconnect after outages [38, 39].



A rich ecosystem of tools and platforms exists to leverage MDT data for various operational tasks:

*   **Configuration & Orchestration:**
    *   **YANG Suite:** Provides a testing and validation environment for device APIs. Can generate Ansible playbooks and Python scripts for configuring MDT subscriptions at scale using NETCONF or other protocols [25, 40-43].
    *   **Ansible:** An agentless tool supporting NETCONF, RESTCONF, and gNMI for modeled configurations [44]. Can be used to automate MDT configuration.
    *   **Terraform:** An Infrastructure-as-Code (IaC) tool leveraging RESTCONF (and increasingly other interfaces) to define and configure network state, including MDT subscriptions [45, 46].
    *   **Cisco Catalyst Center:** A controller providing proactive monitoring and alerts. Uses methods like streaming telemetry and can apply configurations using composite templates that include enabling MDT capabilities and subscriptions [47-49].
    *   **Cisco Network Service Orchestrator (NSO):** An orchestration platform for hybrid, multivendor networks. Uses YANG-defined services over NETCONF and REST to manage configurations [50, 51].

*   **Collection, Storage & Visualization:**
    *   **Collection:** Tools like **Telegraf** (part of TIG) [52, 53], **Elasticsearch** (part of ELK) [54], **Cisco Telemetry Broker** [55, 56], and **Cisco Crosswork Data Gateway** [57, 58] receive and process streaming telemetry data. Crosswork Data Gateway is designed for multivendor, large-scale collection, offloading the collection process from the analytics applications [58, 59].
    *   **Storage:** Data is stored in time-series databases like **InfluxDB** (part of TIG) [52, 53] or centralized logging platforms like **Logstash** (part of ELK) [54].
    *   **Visualization:** Dashboards are created using tools like **Grafana** (part of TIG) [52, 53, 60], **Kibana** (part of ELK) [54], or **Splunk** [61] to display trends, device health, traffic patterns, and security insights over time [61, 62]. Cisco Catalyst Center also provides monitoring dashboards leveraging telemetry [47].

*   **Validation & Troubleshooting:**
    *   Standard **`show` commands** on the Cisco IOS XE device can verify subscriptions and receiver status [63-66].
    *   The **Cisco-IOS-XE-mdt-oper YANG model** can be used programmatically to check the operational status of MDT subscriptions [63, 67].
    *   **YANG Suite** can function as a receiver for testing dial-in and dial-out subscriptions [68-70].
    *   Examining logs and data stores (like Telegraf logs or InfluxDB) is essential for troubleshooting data flow [71-73].

## High-Level Overview: Leveraging MDT

To provide a simplified view of how these components fit together to leverage MDT:


# üì° High-Level Overview: Leveraging Model-Driven Telemetry (MDT)

This high-level overview illustrates how different components work together to effectively leverage MDT in Cisco IOS XE environments.

## üîß Core Platform
- **Cisco IOS XE**  
  - **Enabling Technology:** API Services based on Data Models (**YANG**)

## üìà Key Monitoring Mechanism: Model-Driven Telemetry (MDT)
- **Concept:** Automated Push-based Data Streaming
- **Data Structure:** YANG Models (Native/OpenConfig) + Xpath
- **Interfaces:**
  - gRPC (Dial-out)
  - gNMI (Dial-in)
  - NETCONF (Dial-in)
- **Notification Types:**
  - Periodic
  - On-change

## üîå Leveraged By

### üõ†Ô∏è Configuration / Orchestration Tools
- YANG Suite (Script Generator)
- Ansible
- Terraform
- Catalyst Center
- NSO

### üì• Collection Tools
- Telegraf
- Cisco Telemetry Broker
- Crosswork Data Gateway

### üóÉÔ∏è Storage Systems
- InfluxDB
- Logstash

### üìä Visualization Platforms
- Grafana
- Kibana
- Splunk
- Catalyst Center

### ‚úÖ Validation Tools
- YANG Suite
- Show Commands
- MDT-OPER YANG Models

## üèÜ Key Outcomes
- Improved Visibility
- Faster Troubleshooting
- Better Optimization
- Simplified Management
- Enhanced Security


## Conclusion
